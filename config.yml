backend:
  name: github
  repo: storynory/marni-content
  branch: main
  base_url: https://sveltia-cms-auth.hugh-6ba.workers.dev

publish_mode: editorial_workflow

media_folder: "static/uploads"
public_folder: "/uploads"

media_libraries:
  default:
    config:
      accept_mime_types:
        - image/jpeg
        - image/png
        - image/webp
        - image/svg+xml

      transformations:
        raster_image:
          format: webp
          quality: 85
          width: 2048
          height: 2048
        svg:
          optimize: true

collections:
  # ------------------------------------------------
  # Recipes
  # ------------------------------------------------
  - name: "recipes"
    label: "Recipes"
    folder: "recipes"
    create: true
    slug: "{{slug}}"

    fields:
      - { name: "title", label: "Title", widget: "string" }
      - { name: "draft", label: "Draft (Off is Published)", widget: "boolean", default: true, required: false }
      - { name: "exerpt", label: "Excerpt for top of post", widget: "markdown", required: false }
      - { name: "body", label: "Recipe Notes", widget: "markdown", required: false }
      - { name: "date", label: "Date", widget: "datetime", required: false }
      - { name: "thumbnail", label: "Thumbnail", widget: "image", required: false }
      - { name: "alt", label: "Describe Thumbnail image", widget: "string", required: false }

      - name: "ingredients"
        label: "Ingredients (each item on new line)"
        widget: "list"
        collapsed: true
        required: false

      - name: "instructions"
        label: "Instructions steps (each item on new line)"
        widget: "list"
        collapsed: true
        required: false

      - { name: "methodNotes", label: "Method Notes", widget: "markdown", class: "method-field", required: false }

      - name: "tags"
        label: "Tags"
        widget: "relation"
        collection: "tags"
        multiple: true
        required: false
        search_fields: ["title"]
        value_field: "slug"
        display_fields: ["title"]

      - name: "seasons"
        label: "Season"
        widget: "relation"
        collection: "seasons"
        multiple: true
        required: false
        search_fields: ["title"]
        value_field: "slug"
        display_fields: ["title"]


  # ------------------------------------------------
  # Blog
  # ------------------------------------------------
  - name: "blog"
    label: "Blog"
    folder: "blog"
    create: true
    slug: "{{slug}}"

    fields:
      - { name: "title", label: "Title", widget: "string" }
      - { name: "date", label: "Date", widget: "datetime", required: false }
      - { name: "thumbnail", label: "Thumbnail", widget: "image", required: false }
      - { name: "excerpt", label: "Excerpt", widget: "text", required: false }
      - { name: "body", label: "Body", widget: "markdown", required: false }
      - { name: "draft", label: "Draft", widget: "boolean", default: true, required: false }


  # ------------------------------------------------
  # Pages
  # ------------------------------------------------
  - name: "pages"
    label: "Pages"
    folder: "pages"
    create: true
    slug: "{{slug}}"

    fields:
      - { name: "title", label: "Title", widget: "string" }
      - { name: "date", label: "Date", widget: "datetime", required: false }
      - { name: "thumbnail", label: "Thumbnail", widget: "image", required: false }
      - { name: "excerpt", label: "Excerpt", widget: "text", required: false }
      - { name: "body", label: "Body", widget: "markdown", required: false }
      - { name: "draft", label: "Draft", widget: "boolean", default: true, required: false }


  # ------------------------------------------------
  # Tags
  # ------------------------------------------------
  - name: "tags"
    label: "Tags"
    folder: "tags"
    create: true
    slug: "{{slug}}"

    fields:
      - { name: "title", label: "Title", widget: "string" }
      - { name: "slug", label: "Slug", widget: "string" }
      - { name: "description", label: "Description", widget: "string", required: false }

      - name: "image"
        label: "Image"
        widget: "image"
        required: false

      - { name: "draft", label: "Draft", widget: "boolean", default: false, required: false }


  # ------------------------------------------------
  # Seasons
  # ------------------------------------------------
  - name: "seasons"
    label: "Seasons"
    folder: "seasons"
    create: true
    slug: "{{slug}}"

    fields:
      - { name: "title", label: "Title", widget: "string" }
      - { name: "slug", label: "Slug", widget: "string" }
      - { name: "description", label: "Description", widget: "string", required: false }

      - name: "image"
        label: "Image"
        widget: "image"
        required: false


  # ------------------------------------------------
  # Colour Schemes (new collection)
  # ------------------------------------------------
  - name: "colour-schemes"
    label: "Colour Schemes"
    folder: "colour-schemes"
    create: true
    slug: "{{slug}}"

    fields:
      - { name: "title", label: "Scheme Name", widget: "string" }
      - { label: "Prime",   name: "prime",   widget: "color", default: "#e3d2b7" }
      - { label: "Accent",  name: "accent",  widget: "color", default: "#00634e" }
      - { label: "Second",  name: "second",  widget: "color", default: "#f4e8d7" }
      - { label: "Gray",    name: "gray",    widget: "color", default: "#f8f9fa" }
      - { label: "Text",    name: "text",    widget: "color", default: "#333333" }


# ------------------------------------------------
# Site Settings
# ------------------------------------------------
- name: "settings"
  label: "Site Settings"
  delete: false
  editor:
    preview: false

  files:
    - file: "settings/site.md"
      label: "Site Settings"
      name: "site"

      fields:
        - { name: "title", label: "Internal Title", widget: "hidden", default: "Site settings" }

        # --- FLAT FIELDS (no object, no nesting) ---

        - { name: "siteTitle", label: "Site Title", widget: "string" }
        - { name: "siteTagline", label: "Site Tagline", widget: "string", required: false }
        - { name: "siteIntroTitle", label: "Site Intro Title", widget: "string", required: false }
        - { name: "siteIntro", label: "Site Intro (Hero Text)", widget: "text", required: false }

        - { name: "blogPageIntro", label: "Intro at top of Blog Page", widget: "text", default: "default text", required: false }
        - { name: "seasonsPageIntro", label: "Intro at top of Seasons Page", widget: "text", required: false }
        - { name: "recipesPageIntro", label: "Intro at top of Recipes Page", widget: "text", required: false }

        - name: "portrait"
          label: "Hero Portrait for Front Page"
          widget: "image"
          required: false

        - name: "featuredSeason"
          label: "Featured Season (for homepage)"
          widget: "relation"
          collection: "seasons"
          multiple: false
          required: false
          search_fields: ["title"]
          value_field: "slug"
          display_fields: ["title"]

        - label: "Active Colour Scheme"
          name: "activeScheme"
          widget: "relation"
          collection: "colour-schemes"
          multiple: false
          required: false
          search_fields: ["title"]
          value_field: "slug"
          display_fields: ["title"]

        - {
            name: "fontFamily",
            label: "Header Font",
            widget: "select",
            options: ["Baloo 2", "Comfortaa", "Fraunces", "Quicksand", "Varela Round", "Delius"]
          }

